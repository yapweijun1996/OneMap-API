import"./modulepreload-polyfill-B5Qt9EMX.js";const y="https://www.onemap.gov.sg/api",s=t=>document.getElementById(t),m=s("btn"),a=s("err"),c=s("summary"),l=s("tbody"),d=s("raw"),i=s("btnCopy");function p(t){if(!t){a.classList.add("hidden"),a.textContent="";return}a.classList.remove("hidden"),a.textContent=t}function u(t){return String(t).replace(/[&<>"']/g,e=>({"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"})[e])}async function f(t){const e=await fetch(t),n=await e.text().catch(()=>"");if(!e.ok)throw new Error(`${e.status} ${e.statusText}${n?` - ${n}`:""}`);return n?JSON.parse(n):{}}function x(t){var e,n;l.innerHTML="";for(const r of t){const o=document.createElement("tr");o.className="hover:bg-slate-50",o.innerHTML=`
            <td class="px-3 py-2 font-semibold text-slate-900">${u(((e=r==null?void 0:r.properties)==null?void 0:e.pln_area_n)??"")}</td>
            <td class="px-3 py-2 font-mono text-slate-700">${u(((n=r==null?void 0:r.geometry)==null?void 0:n.type)??"")}</td>
          `,l.appendChild(o)}}m.addEventListener("click",async()=>{p(null),i.disabled=!0,c.textContent="请求中…",d.textContent="",l.innerHTML="";try{const t=await f(`${y}/public/planningarea?year=2024`);d.textContent=JSON.stringify(t,null,2),i.disabled=!1,i.onclick=async()=>navigator.clipboard.writeText(JSON.stringify(t,null,2));const e=Array.isArray(t==null?void 0:t.features)?t.features:[];c.textContent=`features=${e.length}`,x(e.slice(0,80))}catch(t){p((t==null?void 0:t.message)||"请求失败"),c.textContent="等待请求…"}});
