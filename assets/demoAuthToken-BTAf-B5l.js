import"./modulepreload-polyfill-B5Qt9EMX.js";const l="https://www.onemap.gov.sg/api",s=t=>document.getElementById(t),d=s("email"),u=s("password"),p=s("btn"),f=s("out"),a=s("err"),r=s("btnCopy");function c(t){if(!t){a.classList.add("hidden"),a.textContent="";return}a.classList.remove("hidden"),a.textContent=t}function i(t){f.textContent=typeof t=="string"?t:JSON.stringify(t,null,2)}async function w(t,e){const n=await fetch(t,e),o=await n.text().catch(()=>"");if(!n.ok)throw new Error(`${n.status} ${n.statusText}${o?` - ${o}`:""}`);return o?JSON.parse(o):{}}p.addEventListener("click",async()=>{c(null),r.disabled=!0,i("请求中…");const t=(d.value||"").trim(),e=u.value||"";if(!t||!e){c("请填写 email 与 password"),i("等待请求…");return}try{const n=await w(`${l}/auth/post/getToken`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:t,password:e})});i(n),r.disabled=!1,r.onclick=async()=>navigator.clipboard.writeText(JSON.stringify(n,null,2))}catch(n){c((n==null?void 0:n.message)||"请求失败"),i("等待请求…")}});
