import"./modulepreload-polyfill-B5Qt9EMX.js";const p="https://www.onemap.gov.sg/api",s=n=>document.getElementById(n),m=s("theme"),y=s("btn"),r=s("err"),o=s("summary"),i=s("tbody"),u=s("raw"),c=s("btnCopy");function a(n){if(!n){r.classList.add("hidden"),r.textContent="";return}r.classList.remove("hidden"),r.textContent=n}function l(n){return String(n).replace(/[&<>"']/g,e=>({"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"})[e])}async function h(n){const e=await fetch(n),t=await e.text().catch(()=>"");if(!e.ok)throw new Error(`${e.status} ${e.statusText}${t?` - ${t}`:""}`);return t?JSON.parse(t):{}}function E(n){i.innerHTML="";for(const e of n){const t=document.createElement("tr");t.className="hover:bg-slate-50",t.innerHTML=`
            <td class="px-3 py-2 font-semibold text-slate-900">${l((e==null?void 0:e.NAME)??"")}</td>
            <td class="px-3 py-2 text-slate-700">${l((e==null?void 0:e.ADDRESSSTREETNAME)??"")}</td>
            <td class="px-3 py-2 font-mono text-slate-700">${l((e==null?void 0:e.LatLng)??"")}</td>
          `,i.appendChild(t)}}y.addEventListener("click",async()=>{a(null),c.disabled=!0,o.textContent="请求中…",u.textContent="",i.innerHTML="";const n=(m.value||"").trim();if(!n)return a("请填写 queryName");const e=`${p}/public/themesvc/retrieveTheme?queryName=${encodeURIComponent(n)}`;try{const t=await h(e);u.textContent=JSON.stringify(t,null,2),c.disabled=!1,c.onclick=async()=>navigator.clipboard.writeText(JSON.stringify(t,null,2));const d=Array.isArray(t==null?void 0:t.SrchResults)?t.SrchResults:[];o.textContent=`SrchResults=${d.length}`,E(d.slice(0,50))}catch(t){a((t==null?void 0:t.message)||"请求失败"),o.textContent="等待请求…"}});
