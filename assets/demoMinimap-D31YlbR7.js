import"./modulepreload-polyfill-B5Qt9EMX.js";const t=e=>document.getElementById(e),p=t("latlng"),w=t("style"),E=t("zoom"),v=t("w"),b=t("h"),y=t("title"),L=t("iwt"),$=t("btn"),s=t("err"),f=t("url"),h=t("code"),c=t("frame"),m=t("btnCopy");function o(e){if(!e){s.classList.add("hidden"),s.textContent="";return}s.classList.remove("hidden"),s.textContent=e}function x(e){const n=String(e||"").trim().match(/^(-?\d+(\.\d+)?),\s*(-?\d+(\.\d+)?)$/);if(!n)return null;const i=parseFloat(n[1]),r=parseFloat(n[3]);return!Number.isFinite(i)||!Number.isFinite(r)?null:{lat:i,lng:r}}$.addEventListener("click",async()=>{o(null),m.disabled=!0,f.textContent="生成中…",h.textContent="",c.removeAttribute("src");const e=x(p.value);if(!e)return o("latLng 格式必须是：lat,lng");const n=parseInt((E.value||"").trim(),10),i=parseInt((v.value||"").trim(),10),r=parseInt((b.value||"").trim(),10);if(!Number.isFinite(n)||n<11||n>19)return o("zoomLevel 需在 11~19");if(!Number.isFinite(i)||i<=0)return o("width 必须是正整数");if(!Number.isFinite(r)||r<=0)return o("height 必须是正整数");const l=new URLSearchParams;l.set("mapStyle",w.value),l.set("zoomLevel",String(n)),l.set("latLng",`${e.lat},${e.lng}`);const u=(y.value||"").trim(),d=(L.value||"").trim();u&&l.set("calloutTitle",u),d&&l.set("iwt",d);const a=`https://www.onemap.gov.sg/minimap/?${l.toString()}`;f.textContent=a;const g=`<iframe src="${a}" width="${i}" height="${r}" style="border:0;" loading="lazy" referrerpolicy="no-referrer-when-downgrade"></iframe>`;h.textContent=g,c.style.height=`${r}px`,c.src=a,m.disabled=!1,m.onclick=async()=>navigator.clipboard.writeText(g)});
